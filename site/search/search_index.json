{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Home"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"Authenticator_Installation/","text":"Building Block View Content. The building block view shows the static decomposition of the system into building blocks (modules, components, subsystems, classes, interfaces, packages, libraries, frameworks, layers, partitions, tiers, functions, macros, operations, datas structures, \u2026) as well as their dependencies (relationships, associations, \u2026) This view is mandatory for every architecture documentation. In analogy to a house this is the floor plan . Motivation. Maintain an overview of your source code by making its structure understandable through abstraction. This allows you to communicate with your stakeholder on an abstract level without disclosing implementation details. Form. The building block view is a hierarchical collection of black boxes and white boxes (see figure below) and their descriptions. Level 1 is the white box description of the overall system together with black box descriptions of all contained building blocks. Level 2 zooms into some building blocks of level 1. Thus it contains the white box description of selected building blocks of level 1, together with black box descriptions of their internal building blocks. Level 3 zooms into selected building blocks of level 2, and so on. Whitebox Overall System Here you describe the decomposition of the overall system using the following white box template. It contains an overview diagram a motivation for the decomposition black box descriptions of the contained building blocks. For these we offer you alternatives: use one table for a short and pragmatic overview of all contained building blocks and their interfaces use a list of black box descriptions of the building blocks according to the black box template (see below). Depending on your choice of tool this list could be sub-chapters (in text files), sub-pages (in a Wiki) or nested elements (in a modeling tool). (optional:) important interfaces, that are not explained in the black box templates of a building block, but are very important for understanding the white box. Since there are so many ways to specify interfaces why do not provide a specific template for them. In the worst case you have to specify and describe syntax, semantics, protocols, error handling, restrictions, versions, qualities, necessary compatibilities and many things more. In the best case you will get away with examples or simple signatures. <Overview Diagram> Motivation : <text explanation> Contained Building Blocks : <Description of contained building block (black boxes)> Important Interfaces : <Description of important interfaces> Insert your explanations of black boxes from level 1: If you use tabular form you will only describe your black boxes with name and responsibility according to the following schema: Name Responsibility Black Box 1 <Text> Black Box 2 <Text> If you use a list of black box descriptions then you fill in a separate black box template for every important building block . Its headline is the name of the black box. <Name black box 1> Here you describe <black box 1> according the the following black box template: Purpose/Responsibility Interface(s), when they are not extracted as separate paragraphs. This interfaces may include qualities and performance characteristics. (Optional) Quality-/Performance characteristics of the black box, e.g.availability, run time behavior, \u2026. (Optional) directory/file location (Optional) Fulfilled requirements (if you need traceability to requirements). (Optional) Open issues/problems/risks <Purpose/Responsibility> <Interface(s)> <(Optional) Quality/Performance Characteristics> <(Optional) Directory/File Location> <(Optional) Fulfilled Requirements> <(optional) Open Issues/Problems/Risks> <Name black box 2> <black box template> <Name black box n> <black box template> <Name interface 1> \u2026 <Name interface m> Level 2 Here you can specify the inner structure of (some) building blocks from level 1 as white boxes. You have to decide which building blocks of your system are important enough to justify such a detailed description. Please prefer relevance over completeness. Specify important, surprising, risky, complex or volatile building blocks. Leave out normal, simple, boring or standardized parts of your system White Box <building block 1> \u2026describes the internal structure of building block 1 . <white box template> White Box <building block 2> <white box template> \u2026 White Box <building block m> <white box template> Level 3 Here you can specify the inner structure of (some) building blocks from level 2 as white boxes. When you need more detailed levels of your architecture please copy this part of arc42 for additional levels. White Box <_building block x.1_> Specifies the internal structure of building block x.1 . <white box template> White Box <_building block x.2_> <white box template> White Box <_building block y.1_> <white box template>","title":"Installation"},{"location":"Authenticator_Installation/#building-block-view","text":"Content. The building block view shows the static decomposition of the system into building blocks (modules, components, subsystems, classes, interfaces, packages, libraries, frameworks, layers, partitions, tiers, functions, macros, operations, datas structures, \u2026) as well as their dependencies (relationships, associations, \u2026) This view is mandatory for every architecture documentation. In analogy to a house this is the floor plan . Motivation. Maintain an overview of your source code by making its structure understandable through abstraction. This allows you to communicate with your stakeholder on an abstract level without disclosing implementation details. Form. The building block view is a hierarchical collection of black boxes and white boxes (see figure below) and their descriptions. Level 1 is the white box description of the overall system together with black box descriptions of all contained building blocks. Level 2 zooms into some building blocks of level 1. Thus it contains the white box description of selected building blocks of level 1, together with black box descriptions of their internal building blocks. Level 3 zooms into selected building blocks of level 2, and so on.","title":"Building Block View"},{"location":"Authenticator_Installation/#whitebox-overall-system","text":"Here you describe the decomposition of the overall system using the following white box template. It contains an overview diagram a motivation for the decomposition black box descriptions of the contained building blocks. For these we offer you alternatives: use one table for a short and pragmatic overview of all contained building blocks and their interfaces use a list of black box descriptions of the building blocks according to the black box template (see below). Depending on your choice of tool this list could be sub-chapters (in text files), sub-pages (in a Wiki) or nested elements (in a modeling tool). (optional:) important interfaces, that are not explained in the black box templates of a building block, but are very important for understanding the white box. Since there are so many ways to specify interfaces why do not provide a specific template for them. In the worst case you have to specify and describe syntax, semantics, protocols, error handling, restrictions, versions, qualities, necessary compatibilities and many things more. In the best case you will get away with examples or simple signatures. <Overview Diagram> Motivation : <text explanation> Contained Building Blocks : <Description of contained building block (black boxes)> Important Interfaces : <Description of important interfaces> Insert your explanations of black boxes from level 1: If you use tabular form you will only describe your black boxes with name and responsibility according to the following schema: Name Responsibility Black Box 1 <Text> Black Box 2 <Text> If you use a list of black box descriptions then you fill in a separate black box template for every important building block . Its headline is the name of the black box.","title":"Whitebox Overall System"},{"location":"Authenticator_Installation/#name-black-box-1","text":"Here you describe <black box 1> according the the following black box template: Purpose/Responsibility Interface(s), when they are not extracted as separate paragraphs. This interfaces may include qualities and performance characteristics. (Optional) Quality-/Performance characteristics of the black box, e.g.availability, run time behavior, \u2026. (Optional) directory/file location (Optional) Fulfilled requirements (if you need traceability to requirements). (Optional) Open issues/problems/risks <Purpose/Responsibility> <Interface(s)> <(Optional) Quality/Performance Characteristics> <(Optional) Directory/File Location> <(Optional) Fulfilled Requirements> <(optional) Open Issues/Problems/Risks>","title":"&lt;Name black box 1&gt;"},{"location":"Authenticator_Installation/#name-black-box-2","text":"<black box template>","title":"&lt;Name black box 2&gt;"},{"location":"Authenticator_Installation/#name-black-box-n","text":"<black box template>","title":"&lt;Name black box n&gt;"},{"location":"Authenticator_Installation/#name-interface-1","text":"\u2026","title":"&lt;Name interface 1&gt;"},{"location":"Authenticator_Installation/#name-interface-m","text":"","title":"&lt;Name interface m&gt;"},{"location":"Authenticator_Installation/#level-2","text":"Here you can specify the inner structure of (some) building blocks from level 1 as white boxes. You have to decide which building blocks of your system are important enough to justify such a detailed description. Please prefer relevance over completeness. Specify important, surprising, risky, complex or volatile building blocks. Leave out normal, simple, boring or standardized parts of your system","title":"Level 2"},{"location":"Authenticator_Installation/#white-box-building-block-1","text":"\u2026describes the internal structure of building block 1 . <white box template>","title":"White Box &lt;building block 1&gt;"},{"location":"Authenticator_Installation/#white-box-building-block-2","text":"<white box template> \u2026","title":"White Box &lt;building block 2&gt;"},{"location":"Authenticator_Installation/#white-box-building-block-m","text":"<white box template>","title":"White Box &lt;building block m&gt;"},{"location":"Authenticator_Installation/#level-3","text":"Here you can specify the inner structure of (some) building blocks from level 2 as white boxes. When you need more detailed levels of your architecture please copy this part of arc42 for additional levels.","title":"Level 3"},{"location":"Authenticator_Installation/#white-box-_building-block-x1_","text":"Specifies the internal structure of building block x.1 . <white box template>","title":"White Box &lt;_building block x.1_&gt;"},{"location":"Authenticator_Installation/#white-box-_building-block-x2_","text":"<white box template>","title":"White Box &lt;_building block x.2_&gt;"},{"location":"Authenticator_Installation/#white-box-_building-block-y1_","text":"<white box template>","title":"White Box &lt;_building block y.1_&gt;"},{"location":"Messaging_Topic1/","text":"Architecture Constraints Constraint Explanation Hybrid operation While Processes is currently operated mostly on-premise Messaging will be hosted and operated in our cloud environment, which leads to a hybrid approach Minimal configuration effort The Messaging integration should be usable out of the box with minimal configuration effort to have a quick adaption by our customers","title":"Messaging Topic1"},{"location":"Messaging_Topic1/#architecture-constraints","text":"Constraint Explanation Hybrid operation While Processes is currently operated mostly on-premise Messaging will be hosted and operated in our cloud environment, which leads to a hybrid approach Minimal configuration effort The Messaging integration should be usable out of the box with minimal configuration effort to have a quick adaption by our customers","title":"Architecture Constraints"},{"location":"Messaging_Topic2/","text":"System Scope and Context Business Context User The user interacts with Messaging via a chat widget on the self-service portal. Agent The agent can chat with the user via the embedded Messaging and tries to solve his concern. He can then create / extend a process via Processes Messaging Messaging provides the chat as content for the new or extended process Processes Processes is in charge of displaying the processes and user information related to the user the chat is currently for. Technical Context Messaging Backend In the first version, the messaging backend is hosted in our public cloud infrastructure and connects via https to the customer system. POWA On the customer system, the new POWA client includes the messaging UI. Any communication with the parent context is based on events.","title":"Messaging Topic2"},{"location":"Messaging_Topic2/#system-scope-and-context","text":"","title":"System Scope and Context"},{"location":"Messaging_Topic2/#business-context","text":"User The user interacts with Messaging via a chat widget on the self-service portal. Agent The agent can chat with the user via the embedded Messaging and tries to solve his concern. He can then create / extend a process via Processes Messaging Messaging provides the chat as content for the new or extended process Processes Processes is in charge of displaying the processes and user information related to the user the chat is currently for.","title":"Business Context"},{"location":"Messaging_Topic2/#technical-context","text":"Messaging Backend In the first version, the messaging backend is hosted in our public cloud infrastructure and connects via https to the customer system. POWA On the customer system, the new POWA client includes the messaging UI. Any communication with the parent context is based on events.","title":"Technical Context"},{"location":"Notifications_Installation/","text":"Solution Strategy Contents. A short summary and explanation of the fundamental decisions and solution strategies, that shape the system\u2019s architecture. These include technology decisions decisions about the top-level decomposition of the system, e.g. usage of an architectural pattern or design pattern decisions on how to achieve key quality goals relevant organizational decisions, e.g. selecting a development process or delegating certain tasks to third parties. Motivation. These decisions form the cornerstones for your architecture. They are the basis for many other detailed decisions or implementation rules. Form. Keep the explanation of these key decisions short. Motivate what you have decided and why you decided that way, based upon your problem statement, the quality goals and key constraints. Refer to details in the following sections.","title":"Installation"},{"location":"Notifications_Installation/#solution-strategy","text":"Contents. A short summary and explanation of the fundamental decisions and solution strategies, that shape the system\u2019s architecture. These include technology decisions decisions about the top-level decomposition of the system, e.g. usage of an architectural pattern or design pattern decisions on how to achieve key quality goals relevant organizational decisions, e.g. selecting a development process or delegating certain tasks to third parties. Motivation. These decisions form the cornerstones for your architecture. They are the basis for many other detailed decisions or implementation rules. Form. Keep the explanation of these key decisions short. Motivate what you have decided and why you decided that way, based upon your problem statement, the quality goals and key constraints. Refer to details in the following sections.","title":"Solution Strategy"},{"location":"Messaging/access/","text":"Access matrix Resource Action Allowed UserGroup Create ADMIN, STAFFING UserGroup Update ADMIN, STAFFING UserGroup Delete ADMIN, STAFFING UserGroup Add members ADMIN, STAFFING UserGroup Remove members ADMIN, STAFFING Livechat Create ADMIN Livechat Update ADMIN Livechat Delete ADMIN User Create Not implemented User Update Current user, ADMIN(only internal user), STAFFING(only internal user) User Delete Not implemented User Get groups list Current user User Get status Current user Status Update SUPPORT Room Create Current user (internal or every collaboration user) can create all room types except of support and \"live chat user\" (non internal) can only create rooms of type support) Room Invite Current user (internal or every collaboration user) can invite any other (internal or collaboration) user into his new created room Room Update Not implemented Room Delete Not implemented Room Get Operator: Current user member of or room is a public or ADMIN for closed support rooms Customer: member of support room","title":"Access matrix"},{"location":"Messaging/access/#access-matrix","text":"Resource Action Allowed UserGroup Create ADMIN, STAFFING UserGroup Update ADMIN, STAFFING UserGroup Delete ADMIN, STAFFING UserGroup Add members ADMIN, STAFFING UserGroup Remove members ADMIN, STAFFING Livechat Create ADMIN Livechat Update ADMIN Livechat Delete ADMIN User Create Not implemented User Update Current user, ADMIN(only internal user), STAFFING(only internal user) User Delete Not implemented User Get groups list Current user User Get status Current user Status Update SUPPORT Room Create Current user (internal or every collaboration user) can create all room types except of support and \"live chat user\" (non internal) can only create rooms of type support) Room Invite Current user (internal or every collaboration user) can invite any other (internal or collaboration) user into his new created room Room Update Not implemented Room Delete Not implemented Room Get Operator: Current user member of or room is a public or ADMIN for closed support rooms Customer: member of support room","title":"Access matrix"},{"location":"Messaging/authentication/","text":"Authentication The API uses OAuth 2.0 as protocol for authentication. It officially implements the implicit and password grant type implicit grant Receive a token Make a GET request to http://oauth-server/authorize?client_id=web&redirect_uri=http://localhost:4200&response_type=token User will be redirected to login form where he has to specify his email and password After successful authentication user will be redirected to a previously specified uri (i.e. http://localhost:4200). The generated token will be added as a fragment string Verify a token curl -X POST \\ http://oauth-server/check-token \\ -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \\ -F token=TOKEN_HERE As a response will be either valid token's json representation or an error password grant Receive a token curl -X POST \\ http://oauth-server/token \\ -H 'Content-Type: application/x-www-form-urlencoded' \\ -d 'grant_type=password&username=EMAIL&password=PASSWORD' Refresh token curl -X POST \\ http://oauth-server/token \\ -H 'Content-Type: application/x-www-form-urlencoded' \\ -d 'grant_type=refresh_token&refresh_token=REFRESH_TOKEN'","title":"Authentication"},{"location":"Messaging/authentication/#authentication","text":"The API uses OAuth 2.0 as protocol for authentication. It officially implements the implicit and password grant type","title":"Authentication"},{"location":"Messaging/authentication/#implicit-grant","text":"","title":"implicit grant"},{"location":"Messaging/authentication/#receive-a-token","text":"Make a GET request to http://oauth-server/authorize?client_id=web&redirect_uri=http://localhost:4200&response_type=token User will be redirected to login form where he has to specify his email and password After successful authentication user will be redirected to a previously specified uri (i.e. http://localhost:4200). The generated token will be added as a fragment string","title":"Receive a token"},{"location":"Messaging/authentication/#verify-a-token","text":"curl -X POST \\ http://oauth-server/check-token \\ -H 'content-type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW' \\ -F token=TOKEN_HERE As a response will be either valid token's json representation or an error","title":"Verify a token"},{"location":"Messaging/authentication/#password-grant","text":"","title":"password grant"},{"location":"Messaging/authentication/#receive-a-token_1","text":"curl -X POST \\ http://oauth-server/token \\ -H 'Content-Type: application/x-www-form-urlencoded' \\ -d 'grant_type=password&username=EMAIL&password=PASSWORD'","title":"Receive a token"},{"location":"Messaging/authentication/#refresh-token","text":"curl -X POST \\ http://oauth-server/token \\ -H 'Content-Type: application/x-www-form-urlencoded' \\ -d 'grant_type=refresh_token&refresh_token=REFRESH_TOKEN'","title":"Refresh token"},{"location":"Messaging/errors/","text":"Error codes In some cases, our API uses the error objects code field to communicate what caused the request to error. {{#docs-snippet name='example-error.json' title=\"Example error response containing an error code\"}} { \"errors\": [ { \"code\": \"1\" } ] } {{/docs-snippet}} Code Name Description {{#each model as |error|}} {{error.code}} {{error.name}} {{error.comment}} {{/each}}","title":"Error codes"},{"location":"Messaging/errors/#error-codes","text":"In some cases, our API uses the error objects code field to communicate what caused the request to error. {{#docs-snippet name='example-error.json' title=\"Example error response containing an error code\"}} { \"errors\": [ { \"code\": \"1\" } ] } {{/docs-snippet}} Code Name Description {{#each model as |error|}} {{error.code}} {{error.name}} {{error.comment}} {{/each}}","title":"Error codes"},{"location":"Messaging/flows/","text":"Flows Check if support is possible At a high level, you have to use your <livechat-id> to create a support slot and wait until an operator is available. Create a support slot A support slot is like a ticket that \"registers\" the user for proceeding to a support chat. This means until the support-slot isn't telling you that we have a potential match, it makes no sense to prompt the user an option to start a chat. If we compute a potential support operator match, then the slot will notify you that you can proceed. First, create a support-slot (see Creating Resource for more details): {{#docs-snippet name='support-slot-request.json' title='Sample request for creating a support-slot'}} // POST ${api}/support-slots // accept: application/vnd.api+json // content-type: application/vnd.api+json { \"data\": { \"relationships\": { \"livechat\": { \"data\": { \"type\": \"livechats\", \"id\": \"01C7DYBTZWQ2EE1BKQD6361EW7\" } } }, \"type\": \"support-slots\" } } {{/docs-snippet}} The server will respond with the newly created support slot: {{#docs-snippet name='support-slot-response.json' title='Sample response for the created support-slot'}} { \"data\" : { \"id\" : \"${support-slot-id}\", \"type\" : \"support-slots\", \"attributes\" : { \"preconditions\" : { }, \"status-reason\" : \"NO_OPERATOR_AVAILABLE\", \"status\" : \"UNAVAILABLE\" }, \"links\" : { \"self\" : \"${support-slot-self-url}\" } } } {{/docs-snippet}} Now you can observe the status attribute to determine if a potential support operator is available to handle a new support chat. if status is: \"UNAVAILABLE\" then wait a short time and follow the support-slot self link (1.) \"AVAILABLE\" then trigger the code to let your user start a support chat","title":"Flows"},{"location":"Messaging/flows/#flows","text":"","title":"Flows"},{"location":"Messaging/flows/#check-if-support-is-possible","text":"At a high level, you have to use your <livechat-id> to create a support slot and wait until an operator is available.","title":"Check if support is possible"},{"location":"Messaging/flows/#create-a-support-slot","text":"A support slot is like a ticket that \"registers\" the user for proceeding to a support chat. This means until the support-slot isn't telling you that we have a potential match, it makes no sense to prompt the user an option to start a chat. If we compute a potential support operator match, then the slot will notify you that you can proceed. First, create a support-slot (see Creating Resource for more details): {{#docs-snippet name='support-slot-request.json' title='Sample request for creating a support-slot'}} // POST ${api}/support-slots // accept: application/vnd.api+json // content-type: application/vnd.api+json { \"data\": { \"relationships\": { \"livechat\": { \"data\": { \"type\": \"livechats\", \"id\": \"01C7DYBTZWQ2EE1BKQD6361EW7\" } } }, \"type\": \"support-slots\" } } {{/docs-snippet}} The server will respond with the newly created support slot: {{#docs-snippet name='support-slot-response.json' title='Sample response for the created support-slot'}} { \"data\" : { \"id\" : \"${support-slot-id}\", \"type\" : \"support-slots\", \"attributes\" : { \"preconditions\" : { }, \"status-reason\" : \"NO_OPERATOR_AVAILABLE\", \"status\" : \"UNAVAILABLE\" }, \"links\" : { \"self\" : \"${support-slot-self-url}\" } } } {{/docs-snippet}} Now you can observe the status attribute to determine if a potential support operator is available to handle a new support chat. if status is: \"UNAVAILABLE\" then wait a short time and follow the support-slot self link (1.) \"AVAILABLE\" then trigger the code to let your user start a support chat","title":"Create a support slot"},{"location":"Messaging/introduction/","text":"Introduction Smoope provides a public http api following the JSON:API specification. Our api resources use some standard formats for some of its attributes. You can find an overview of these in our {{#link-to 'docs.standards'}}Standards{{/link-to}} page. JSON:API allows us to define custom error codes for specific failures. Smoope specific errors are listed in the {{#link-to 'docs.errors'}}list of error codes{{/link-to}}. Important resources Due to smoope being a messaging service, we have some core resources: {{#link-to 'docs.resources.detail' 'User'}}User{{/link-to}} - a smoope user {{#link-to 'docs.resources.detail' 'Room'}}Room{{/link-to}} - contains many events and is usually used to allow users to communicate with each other {{#link-to 'docs.resources.detail' 'Event'}}Event{{/link-to}} - represent things that happen in smoope. For example a text message or some updates like a user changing its name You can find additional resources in the resource list in the navigation.","title":"Introduction"},{"location":"Messaging/introduction/#introduction","text":"Smoope provides a public http api following the JSON:API specification. Our api resources use some standard formats for some of its attributes. You can find an overview of these in our {{#link-to 'docs.standards'}}Standards{{/link-to}} page. JSON:API allows us to define custom error codes for specific failures. Smoope specific errors are listed in the {{#link-to 'docs.errors'}}list of error codes{{/link-to}}.","title":"Introduction"},{"location":"Messaging/introduction/#important-resources","text":"Due to smoope being a messaging service, we have some core resources: {{#link-to 'docs.resources.detail' 'User'}}User{{/link-to}} - a smoope user {{#link-to 'docs.resources.detail' 'Room'}}Room{{/link-to}} - contains many events and is usually used to allow users to communicate with each other {{#link-to 'docs.resources.detail' 'Event'}}Event{{/link-to}} - represent things that happen in smoope. For example a text message or some updates like a user changing its name You can find additional resources in the resource list in the navigation.","title":"Important resources"},{"location":"Messaging/livechat/","text":"Support Livechat The livechat is the component that allows customers to communicate with support operators. Before embedding the livechat, make sure that you receive your livechat-id and tenant-id from our support. We provide two ways to embed a livechat. Both accept configuration options, language configuration and preconditions. Options A livechat instance has various options to control its behavior: captureLinks: boolean - a click on any link in the chat history will prevent transition and emit a CapturedLink event Programmatic livechat creation The livechat can be initialized via JavaScript. This is the preferred way if you're planning to use smoope as a support chat on your website. To add a livechat to a regular HTML page, you have to first load the embeddable JavaScript file. <script async defer src=\"https://<tenantId>-chat.smoope.net/embed.js\"></script> As the snippet uses async defer to prevent blocking your own JavaScript, you have to wait for the window to be loaded before initializing the livechat. <script type=\"text/javascript\"> window.addEventListener('load', function () { // Initialize a livechat instance (Note: this doesn't start/insert it into DOM). var chat = new smoopeChat.default(document.querySelector('#chat'), { livechat: '<livechat-id>', language: 'fr', preconditions: { language: 'fr', zip: '1845' }, }); // Insert livechat instance into DOM. chat.insert(); }); </script> Once the chat is inserted, smoope will automatically show a button to let the user request support if possible. The returned chat instance acts as an event emitter. Exposed events: captureLinks , if the captureLinks option is enabled with {url: string} as event payload Example on how to capture link clicks var chat = new smoopeChat.default(document.querySelector('#chat'), { // ... other options captureLinks: true }); chat.on(\"capturedLink\", function(data) { alert(`user clicked a link: ${data.url}`); }); Automatic livechat creation via URL If you can't execute JavaScript in your App, you can easily embed the livechat by using a Webview. `http://${tenantId}-chat.smoope.net/${livechatId}` To configure the instance, you can provide preconditions, language and other options as query parameters. The complex values have to be stringified and url encoded. For example to pass the preconditions {\"foo\": \"bar\"} , append a query parameter preconditions=%7B%22foo%22%3A%22bar%22%7D . The supported query parameters are preconditions , language and options Example code to build a embeddable chat url in JavaScript const language = 'fr'; const preconditions = encodeURIComponent(JSON.stringify({ language, zip: '1845' })); const options = encodeURIComponent(JSON.stringify({ captureLinks: true })); const url = `http://${tenantId}-chat.smoope.net/${livechatId}` + `?language=${language}` + `&preconditions=${preconditions}` + `&options=${options}`; If the livechat is embedded via url, we emit the following events using the postMessage API. Messages are serialized as JSON objects. Due to missing bridge between JavaScript and Android/iOS, we have to write some custom code to listen for emitted events. (See \"Handling events in Android\" and \"Handling events in iOS\") MessageEvent data type type MessageEventData = { type: string, data: Object, _by: 'smoope', }; // Example MessageEvent // {\"type\":\"ReadyToSupport\",\"data\":{\"room\":\"01CXWBKT6Q6YCV1X12FNSJ0QDR\"},\"_by\":\"smoope\"} We emit the following types via postMessage . CapturedLink , if the captureLinks option is enabled with {url: string} as event payload ReadyToSupport , if the chat is initialized far enough to accept support input from the user RoomClosed , if the current support room is closed SupportRequestRejected , if the current support request got rejected Listening for events in Android In Android, you have to define a JavaScript interface to inject into the WebView . Using the addJavascriptInterface , register your Interface as SMOOPE_IPC . This allows us to call your Interface, if defined. Custom JavaScript interface to add to the webview class dummy.app.snippets.support.integration.SmoopeIpc { @JavascriptInterface public void postMessage(String data, String origin) { // handle livechat event System.out.println(\"Smoope chat emitted data: \" + data + \" \" + origin); } } Enable JavaScript and register your interface as SMOOPE_IPC webView.getSettings().setJavaScriptEnabled(true); webView.addJavascriptInterface(new dummy.app.snippets.support.integration.SmoopeIpc(), \"SMOOPE_IPC\"); webView.loadUrl(\"<webchat-url>\"); Listening for events in iOS Similar to Android, in iOS, you have to register a listener for a custom messageHandler method on a WKWebView . Use the SMOOPE_IPC name to add to the WKUserContentController . Setup the WKWebView to receive livechat events let config = WKWebViewConfiguration() config.preferences.javaScriptEnabled = true let userContentController = WKUserContentController() userContentController.add(self, name: \"SMOOPE_IPC\") config.userContentController = userContentController webView.load(URLRequest(url: URL(string: \"<webchat-url>\")!)) Listen for messages with the SMOOPE_IPC name extension ViewController: WKScriptMessageHandler { func userContentController(_ userContentController: WKUserContentController, didReceive message: WKScriptMessage) { if message.name == \"SMOOPE_IPC\", let messageBody = message.body as? String { // handle livechat event print(messageBody) } } }","title":"Support Livechat"},{"location":"Messaging/livechat/#support-livechat","text":"The livechat is the component that allows customers to communicate with support operators. Before embedding the livechat, make sure that you receive your livechat-id and tenant-id from our support. We provide two ways to embed a livechat. Both accept configuration options, language configuration and preconditions.","title":"Support Livechat"},{"location":"Messaging/livechat/#options","text":"A livechat instance has various options to control its behavior: captureLinks: boolean - a click on any link in the chat history will prevent transition and emit a CapturedLink event","title":"Options"},{"location":"Messaging/livechat/#programmatic-livechat-creation","text":"The livechat can be initialized via JavaScript. This is the preferred way if you're planning to use smoope as a support chat on your website. To add a livechat to a regular HTML page, you have to first load the embeddable JavaScript file. <script async defer src=\"https://<tenantId>-chat.smoope.net/embed.js\"></script> As the snippet uses async defer to prevent blocking your own JavaScript, you have to wait for the window to be loaded before initializing the livechat. <script type=\"text/javascript\"> window.addEventListener('load', function () { // Initialize a livechat instance (Note: this doesn't start/insert it into DOM). var chat = new smoopeChat.default(document.querySelector('#chat'), { livechat: '<livechat-id>', language: 'fr', preconditions: { language: 'fr', zip: '1845' }, }); // Insert livechat instance into DOM. chat.insert(); }); </script> Once the chat is inserted, smoope will automatically show a button to let the user request support if possible. The returned chat instance acts as an event emitter. Exposed events: captureLinks , if the captureLinks option is enabled with {url: string} as event payload Example on how to capture link clicks var chat = new smoopeChat.default(document.querySelector('#chat'), { // ... other options captureLinks: true }); chat.on(\"capturedLink\", function(data) { alert(`user clicked a link: ${data.url}`); });","title":"Programmatic livechat creation"},{"location":"Messaging/livechat/#automatic-livechat-creation-via-url","text":"If you can't execute JavaScript in your App, you can easily embed the livechat by using a Webview. `http://${tenantId}-chat.smoope.net/${livechatId}` To configure the instance, you can provide preconditions, language and other options as query parameters. The complex values have to be stringified and url encoded. For example to pass the preconditions {\"foo\": \"bar\"} , append a query parameter preconditions=%7B%22foo%22%3A%22bar%22%7D . The supported query parameters are preconditions , language and options Example code to build a embeddable chat url in JavaScript const language = 'fr'; const preconditions = encodeURIComponent(JSON.stringify({ language, zip: '1845' })); const options = encodeURIComponent(JSON.stringify({ captureLinks: true })); const url = `http://${tenantId}-chat.smoope.net/${livechatId}` + `?language=${language}` + `&preconditions=${preconditions}` + `&options=${options}`; If the livechat is embedded via url, we emit the following events using the postMessage API. Messages are serialized as JSON objects. Due to missing bridge between JavaScript and Android/iOS, we have to write some custom code to listen for emitted events. (See \"Handling events in Android\" and \"Handling events in iOS\") MessageEvent data type type MessageEventData = { type: string, data: Object, _by: 'smoope', }; // Example MessageEvent // {\"type\":\"ReadyToSupport\",\"data\":{\"room\":\"01CXWBKT6Q6YCV1X12FNSJ0QDR\"},\"_by\":\"smoope\"} We emit the following types via postMessage . CapturedLink , if the captureLinks option is enabled with {url: string} as event payload ReadyToSupport , if the chat is initialized far enough to accept support input from the user RoomClosed , if the current support room is closed SupportRequestRejected , if the current support request got rejected","title":"Automatic livechat creation via URL"},{"location":"Messaging/livechat/#listening-for-events-in-android","text":"In Android, you have to define a JavaScript interface to inject into the WebView . Using the addJavascriptInterface , register your Interface as SMOOPE_IPC . This allows us to call your Interface, if defined. Custom JavaScript interface to add to the webview class dummy.app.snippets.support.integration.SmoopeIpc { @JavascriptInterface public void postMessage(String data, String origin) { // handle livechat event System.out.println(\"Smoope chat emitted data: \" + data + \" \" + origin); } } Enable JavaScript and register your interface as SMOOPE_IPC webView.getSettings().setJavaScriptEnabled(true); webView.addJavascriptInterface(new dummy.app.snippets.support.integration.SmoopeIpc(), \"SMOOPE_IPC\"); webView.loadUrl(\"<webchat-url>\");","title":"Listening for events in Android"},{"location":"Messaging/livechat/#listening-for-events-in-ios","text":"Similar to Android, in iOS, you have to register a listener for a custom messageHandler method on a WKWebView . Use the SMOOPE_IPC name to add to the WKUserContentController . Setup the WKWebView to receive livechat events let config = WKWebViewConfiguration() config.preferences.javaScriptEnabled = true let userContentController = WKUserContentController() userContentController.add(self, name: \"SMOOPE_IPC\") config.userContentController = userContentController webView.load(URLRequest(url: URL(string: \"<webchat-url>\")!)) Listen for messages with the SMOOPE_IPC name extension ViewController: WKScriptMessageHandler { func userContentController(_ userContentController: WKUserContentController, didReceive message: WKScriptMessage) { if message.name == \"SMOOPE_IPC\", let messageBody = message.body as? String { // handle livechat event print(messageBody) } } }","title":"Listening for events in iOS"},{"location":"Messaging/standards/","text":"Standards Aside from all types linked in the resources view, we have some conventions for other attribute types: name type validation description OffsetDateTime String ISO 8601 formatted string id String notBlank Size(0..26) variable length string Format examples # OffsetDateTime \"2018-02-27T08:15:12.333Z\" # id \"01ARZ3NDEKTSV4RRFFQ69G5FAV\" Resource idempotency When clients create resources and they want idempotence for creating them. They should send the a header with the name Smoope-Idempotency-Key and a value that identifies this resource for the client. This value will be returned in a meta dictionary on the returning resource object under the key idempotency-key . Current supported idempotence requests: events Request : curl -X POST \\ https://smck-api.smoope.it/events \\ -H 'Authorization: {{auth}}' \\ -H 'Content-Type: application/vnd.api+json' \\ -d '{ \"data\": { \"type\": \"events\", \"attributes\": { \u2026 }, \"relationships\": { \u2026 }, \"meta\": { \"idempotency-key\": \"{{idempotency-key}}\" } } } Response : { \"data\": { \"id\": \"{{event-id}}\", \"type\": \"events\", \"attributes\": { \u2026 }, \u2026 \"meta\": { \"idempotency-key\": \"{{idempotency-key}}\" } } } {{outlet}}","title":"Standards"},{"location":"Messaging/standards/#standards","text":"Aside from all types linked in the resources view, we have some conventions for other attribute types: name type validation description OffsetDateTime String ISO 8601 formatted string id String notBlank Size(0..26) variable length string","title":"Standards"},{"location":"Messaging/standards/#format-examples","text":"# OffsetDateTime \"2018-02-27T08:15:12.333Z\" # id \"01ARZ3NDEKTSV4RRFFQ69G5FAV\"","title":"Format examples"},{"location":"Messaging/standards/#resource-idempotency","text":"When clients create resources and they want idempotence for creating them. They should send the a header with the name Smoope-Idempotency-Key and a value that identifies this resource for the client. This value will be returned in a meta dictionary on the returning resource object under the key idempotency-key . Current supported idempotence requests: events Request : curl -X POST \\ https://smck-api.smoope.it/events \\ -H 'Authorization: {{auth}}' \\ -H 'Content-Type: application/vnd.api+json' \\ -d '{ \"data\": { \"type\": \"events\", \"attributes\": { \u2026 }, \"relationships\": { \u2026 }, \"meta\": { \"idempotency-key\": \"{{idempotency-key}}\" } } } Response : { \"data\": { \"id\": \"{{event-id}}\", \"type\": \"events\", \"attributes\": { \u2026 }, \u2026 \"meta\": { \"idempotency-key\": \"{{idempotency-key}}\" } } } {{outlet}}","title":"Resource idempotency"},{"location":"Messaging/events/","text":"Public event types {{event-def-table definitions=model}}","title":"Events"},{"location":"Messaging/events/#public-event-types","text":"{{event-def-table definitions=model}}","title":"Public event types"},{"location":"Messaging/events/definition/","text":"Definition Event resources behave differently depending on their event type. The following table gives an overview of which event type implies what functionality. Click on the type to get a detailed view on the events content. Public event types {{event-def-table definitions=model}} Scope The scope of an event is not part of an Event's attribute set, but part of its definition. The scope specifies where the event is defined to occur. Currently the following scopes are defined: Room - Event can only be observed in a room. Global - Event can only be observed globally, i.e. without a reference to a room. Deletability Specifies if an event can be deleted. Ephemeral event An ephemeral event cannot be retrieved via Events resource. It can only be observed by sync. The ephemerality of an event is not part of its attribute set, but part of its definition. Annotatable Specifies if an event can be annotated.","title":"Definition"},{"location":"Messaging/events/definition/#definition","text":"Event resources behave differently depending on their event type. The following table gives an overview of which event type implies what functionality. Click on the type to get a detailed view on the events content.","title":"Definition"},{"location":"Messaging/events/definition/#public-event-types","text":"{{event-def-table definitions=model}}","title":"Public event types"},{"location":"Messaging/events/definition/#scope","text":"The scope of an event is not part of an Event's attribute set, but part of its definition. The scope specifies where the event is defined to occur. Currently the following scopes are defined: Room - Event can only be observed in a room. Global - Event can only be observed globally, i.e. without a reference to a room.","title":"Scope"},{"location":"Messaging/events/definition/#deletability","text":"Specifies if an event can be deleted.","title":"Deletability"},{"location":"Messaging/events/definition/#ephemeral-event","text":"An ephemeral event cannot be retrieved via Events resource. It can only be observed by sync. The ephemerality of an event is not part of its attribute set, but part of its definition.","title":"Ephemeral event"},{"location":"Messaging/events/definition/#annotatable","text":"Specifies if an event can be annotated.","title":"Annotatable"},{"location":"Messaging/events/definition/detail/","text":"{{model.name}} {{event-def-table definitions=(array model.definition)}} ## Content schema {{highlight-code code=model.code title='JSON Schema to validate this events content.'}}","title":"{{model.name}}"},{"location":"Messaging/events/definition/detail/#modelname","text":"{{event-def-table definitions=(array model.definition)}} ## Content schema {{highlight-code code=model.code title='JSON Schema to validate this events content.'}}","title":"{{model.name}}"},{"location":"Messaging/integration/support/","text":"**Support Integration** The support integration is the component that allows customers to communicate with support operators. Before embedding a support livechat, make sure that you receive your `livechat-id` and `tenant-id` from our support. {{outlet}}","title":"Integration"},{"location":"Messaging/integration/webhooks/","text":"Webhooks Outgoing webhooks This feature allows customer's 3rd-party systems to be notified about events happened in smoope via HTTP protocol. Handling requests Each time new event registed in smoope it will be send out via HTTP POST request with Content-Type: application/json header and predefined payload to remote url. Payload Attribute Required Description type * Original event's type content * Original event's content version * Version, currently always set to 2 roomId Room's identifier event was posted in senderId Sender's identifier senderExternalId Sender's external identifier recipients Collection of recipients referenceId Refererenced event (in case of original event references another) livechatId Livechat's identifier used in conversation preconditions Livechat's preconditions used while creating a conversation Recipient Attribute Required Description id * Recipient's identifier externalId Recipient's external identifier Supported events Type Description s.room.create Room was created s.room.membership User has joined or left a room s.message.text User has created a text message s.message.media User has created a media message s.message.edit User has edited a message s.message.delete User has removed a message s.room.close Room was closed Signature and its verification Signature is a string formatted in the way of {timestamp}:{content} and signed with predefined signing key using HMAC algorithm and SHA-512 as underlying hash function. In string above content represents an outgoing payload . Both signature and timestamp values are served via HTTP headers: smoope-signature - unique signature allows to verify incoming request at 3rd-party system smoope-timestamp - ISO 8601 formatted string, represents when request was performed Signing process is performed on server each time it attempts to request remote url. While receiving requests from smoope, 3rd-party system is responsible to verify incoming payloads by performing same signing process at its side and comparing result with original signature sent within the request. Same signature means request was not intercepted or changed by other software or persons. Example The following snippet represents a curl request which will be sent in case of s.message.text and signed with hmac key: {{#docs-snippet name='outgoing-hook.sh' title='Simulating a webhook with curl' language='sh'}} curl -X POST \\ -H \"Content-Type:application/json;charset=UTF-8\" \\ -H \"smoope-timestamp:2019-05-15T12:58:34.758710Z\" \\ -H \"smoope-signature:wT50Do1_-KU1Ga8u6nFuFl_ZPzlXbmg1bLukr5zGdTf5P0E51VHvuq71NUXVe-m6P9HgW58WL8_T2F5BX-wZPg\" \\ -d '{\"senderId\":\"sender\",\"type\":\"s.message.text\",\"version\":1,\"content\":{\"body\":\"ho-ho\"},\"roomId\":\"room\",\"livechatId\":\"livechat\"}' \\ \"http://some.org/webhook\" {{/docs-snippet}}","title":"Webhooks"},{"location":"Messaging/integration/webhooks/#webhooks","text":"","title":"Webhooks"},{"location":"Messaging/integration/webhooks/#outgoing-webhooks","text":"This feature allows customer's 3rd-party systems to be notified about events happened in smoope via HTTP protocol.","title":"Outgoing webhooks"},{"location":"Messaging/integration/webhooks/#handling-requests","text":"Each time new event registed in smoope it will be send out via HTTP POST request with Content-Type: application/json header and predefined payload to remote url.","title":"Handling requests"},{"location":"Messaging/integration/webhooks/#payload","text":"Attribute Required Description type * Original event's type content * Original event's content version * Version, currently always set to 2 roomId Room's identifier event was posted in senderId Sender's identifier senderExternalId Sender's external identifier recipients Collection of recipients referenceId Refererenced event (in case of original event references another) livechatId Livechat's identifier used in conversation preconditions Livechat's preconditions used while creating a conversation","title":"Payload"},{"location":"Messaging/integration/webhooks/#recipient","text":"Attribute Required Description id * Recipient's identifier externalId Recipient's external identifier","title":"Recipient"},{"location":"Messaging/integration/webhooks/#supported-events","text":"Type Description s.room.create Room was created s.room.membership User has joined or left a room s.message.text User has created a text message s.message.media User has created a media message s.message.edit User has edited a message s.message.delete User has removed a message s.room.close Room was closed","title":"Supported events"},{"location":"Messaging/integration/webhooks/#signature-and-its-verification","text":"Signature is a string formatted in the way of {timestamp}:{content} and signed with predefined signing key using HMAC algorithm and SHA-512 as underlying hash function. In string above content represents an outgoing payload . Both signature and timestamp values are served via HTTP headers: smoope-signature - unique signature allows to verify incoming request at 3rd-party system smoope-timestamp - ISO 8601 formatted string, represents when request was performed Signing process is performed on server each time it attempts to request remote url. While receiving requests from smoope, 3rd-party system is responsible to verify incoming payloads by performing same signing process at its side and comparing result with original signature sent within the request. Same signature means request was not intercepted or changed by other software or persons.","title":"Signature and its verification"},{"location":"Messaging/integration/webhooks/#example","text":"The following snippet represents a curl request which will be sent in case of s.message.text and signed with hmac key: {{#docs-snippet name='outgoing-hook.sh' title='Simulating a webhook with curl' language='sh'}} curl -X POST \\ -H \"Content-Type:application/json;charset=UTF-8\" \\ -H \"smoope-timestamp:2019-05-15T12:58:34.758710Z\" \\ -H \"smoope-signature:wT50Do1_-KU1Ga8u6nFuFl_ZPzlXbmg1bLukr5zGdTf5P0E51VHvuq71NUXVe-m6P9HgW58WL8_T2F5BX-wZPg\" \\ -d '{\"senderId\":\"sender\",\"type\":\"s.message.text\",\"version\":1,\"content\":{\"body\":\"ho-ho\"},\"roomId\":\"room\",\"livechatId\":\"livechat\"}' \\ \"http://some.org/webhook\" {{/docs-snippet}}","title":"Example"},{"location":"Messaging/integration/support/website/","text":"Support livechat in a website The support integration in a regular website happens by including a script from our server. Bootstrapping the livechat The livechat can be initialized via JavaScript. This is the preferred way if you're planning to use smoope as a support chat on your website. To add a livechat to a regular HTML page, you have to first load the embeddable JavaScript file. {{#docs-snippet name='your-snippet-name.hbs' title=\"Loading the embed script\"}} {{/docs-snippet}} As the snippet uses async defer to prevent blocking your own JavaScript, you have to wait for the window to be loaded before initializing the livechat. To do this, copy the following snippet, which starts the chat in the most straightforward way. {{docs-snippet name='support/integration/embed-snippet.html' title='Example on how to setup the chat' language='html'}} Once the chat is inserted, smoope will automatically show a button to let the user request support if possible. **Chat visibility** Depending on your livechat configuration, the button will only appear in some cases, e.g. if a matching operator is available. Options The chat initialization has the following constructor signature: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/chat-interface.ts' language='ts' label=\"Chat constructor\"}} {{demo.snippet name='support/integration/chat-options.ts' language='ts' label=\"LiveChatOptions\"}} {{/docs-demo}} This means to construct the chat you have to pass in: parent: HTMLElement - the element that the chat appends itself to options: LiveChatOptions - (optional) the options that configure the chat, as mentioned above The instance can be configured by setting the options object. You can adjust the following fields: livechat: string - the livechat id captureLinks: boolean - (optional) a click on any link in the chat history will prevent transition and emit a CapturedLink event preconditions: object - (optional) an object that is used to improve operator routing. If you don't use any special routing logic, you shouldn't have to set it language: string - (optional) a hint that influences the language, the system is using, for the support user. Listening for events The returned chat instance acts as an event emitter and emits various informations to your website. The following events are observable from your website: captureLinks , if the captureLinks option is enabled with {url: string} as event payload {{#docs-snippet name='listen-events.js' title='Example on how to capture link clicks' language='js'}} var chat = new smoopeChat.default(document.querySelector('#chat'), { // ... other options captureLinks: true }); chat.on(\"capturedLink\", function(data) { alert( user clicked a link: ${data.url} ); }); {{/docs-snippet}}","title":"Support livechat in a website"},{"location":"Messaging/integration/support/website/#support-livechat-in-a-website","text":"The support integration in a regular website happens by including a script from our server.","title":"Support livechat in a website"},{"location":"Messaging/integration/support/website/#bootstrapping-the-livechat","text":"The livechat can be initialized via JavaScript. This is the preferred way if you're planning to use smoope as a support chat on your website. To add a livechat to a regular HTML page, you have to first load the embeddable JavaScript file. {{#docs-snippet name='your-snippet-name.hbs' title=\"Loading the embed script\"}} {{/docs-snippet}} As the snippet uses async defer to prevent blocking your own JavaScript, you have to wait for the window to be loaded before initializing the livechat. To do this, copy the following snippet, which starts the chat in the most straightforward way. {{docs-snippet name='support/integration/embed-snippet.html' title='Example on how to setup the chat' language='html'}} Once the chat is inserted, smoope will automatically show a button to let the user request support if possible. **Chat visibility** Depending on your livechat configuration, the button will only appear in some cases, e.g. if a matching operator is available.","title":"Bootstrapping the livechat"},{"location":"Messaging/integration/support/website/#options","text":"The chat initialization has the following constructor signature: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/chat-interface.ts' language='ts' label=\"Chat constructor\"}} {{demo.snippet name='support/integration/chat-options.ts' language='ts' label=\"LiveChatOptions\"}} {{/docs-demo}} This means to construct the chat you have to pass in: parent: HTMLElement - the element that the chat appends itself to options: LiveChatOptions - (optional) the options that configure the chat, as mentioned above The instance can be configured by setting the options object. You can adjust the following fields: livechat: string - the livechat id captureLinks: boolean - (optional) a click on any link in the chat history will prevent transition and emit a CapturedLink event preconditions: object - (optional) an object that is used to improve operator routing. If you don't use any special routing logic, you shouldn't have to set it language: string - (optional) a hint that influences the language, the system is using, for the support user.","title":"Options"},{"location":"Messaging/integration/support/website/#listening-for-events","text":"The returned chat instance acts as an event emitter and emits various informations to your website. The following events are observable from your website: captureLinks , if the captureLinks option is enabled with {url: string} as event payload {{#docs-snippet name='listen-events.js' title='Example on how to capture link clicks' language='js'}} var chat = new smoopeChat.default(document.querySelector('#chat'), { // ... other options captureLinks: true }); chat.on(\"capturedLink\", function(data) { alert( user clicked a link: ${data.url} ); }); {{/docs-snippet}}","title":"Listening for events"},{"location":"Messaging/integration/support/webview/","text":"Support livechat in a webview The support integration in a webview happens by opening the WebView with a preconfigured url. This will automatically create a support conversation when loaded. {{docs-snippet name='support/integration/url.js' title='Livechat URL structure' language='js'}} To configure the instance, you can provide preconditions, language and other options as query parameters. The complex values have to be stringified and url encoded. For example to pass the preconditions {\"foo\": \"bar\"} , append a query parameter preconditions=%7B%22foo%22%3A%22bar%22%7D . The supported query parameters are preconditions , language and options {{docs-snippet name='support/integration/building-url.js' title='Example code to build a embeddable chat url in JavaScript' language='js'}} If the livechat is embedded via url, we emit the following events using the postMessage API. Messages are serialized as JSON objects. {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/message-event-data.ts' language='ts' label=\"Message\"}} {{demo.snippet name='support/integration/ReadyToSupportData.ts' language='ts' label=\"ReadyToSupport\"}} {{demo.snippet name='support/integration/CapturedLinkData.ts' language='ts' label=\"CapturedLink\"}} {{demo.snippet name='support/integration/RoomClosedData.ts' language='ts' label=\"RoomClosed\"}} {{demo.snippet name='support/integration/SupportRequestRejectedData.ts' language='ts' label=\"SupportRequestRejected\"}} {{demo.snippet name='support/integration/RequestTokenData.ts' language='ts' label=\"RequestToken\"}} {{/docs-demo}} We emit the following types via postMessage . ReadyToSupport , if the chat is initialized far enough to accept support input from the user CapturedLink , if the captureLinks option is enabled with {url: string} as event payload RoomClosed , if the current support room is closed SupportRequestRejected , if the current support request got rejected RequestTokenData , if the provided token became invalid Due to missing bridge between JavaScript and Android/iOS, we have to write some custom code to listen for emitted events. (See \"Android Setup\" and \"iOS Setup\") Android Setup In Android, you have to define a JavaScript interface to inject into the WebView . {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/ipc-android.kt' language='kotlin' label=\"Kotlin\"}} {{demo.snippet name='support/integration/ipc-android.java' language='java' label=\"Java\"}} {{/docs-demo}} Using the addJavascriptInterface , register your Interface as SMOOPE_IPC . This allows us to call your Interface, if defined. {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/webview-setup-android.kt' language='kotlin' label=\"Kotlin\"}} {{demo.snippet name='support/integration/webview-setup-android.java' language='java' label=\"Java\"}} {{/docs-demo}} **File upload** If you want to allow the user to select a file, you have to make some adjustments. First [set](https://developer.android.com/reference/android/webkit/WebView.html#setWebChromeClient(android.webkit.WebChromeClient)) a [`WebChromeClient`](https://developer.android.com/reference/android/webkit/WebChromeClient) on the `WebView` instance. Next you can implement the [`onShowFileChooser`](https://developer.android.com/reference/android/webkit/WebChromeClient#onShowFileChooser(android.webkit.WebView,%2520android.webkit.ValueCallback%3Candroid.net.Uri%5B%5D%3E,%2520android.webkit.WebChromeClient.FileChooserParams)) to fit your use-case. iOS Setup Similar to Android, in iOS, you have to register a listener for a custom messageHandler method on a WKWebView . Use the SMOOPE_IPC name to add to the WKUserContentController . Setup the WKWebView to receive livechat events: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/webview-setup-ios.swift' language='swift' label=\"Swift\"}} {{demo.snippet name='support/integration/webview-setup-ios.m' language='obj-c' label=\"Objective-C\"}} {{/docs-demo}} Listen for messages with the SMOOPE_IPC name: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/ipc-ios.swift' language='swift' label=\"Swift\"}} {{demo.snippet name='support/integration/ipc-ios.m' language='obj-c' label=\"Objective-C\"}} {{/docs-demo}} Opening external links If you want to allow the livechat to open external links, you have to make additional adjustments. The following snippets allows the webview to open external links by intercepting navigation actions. {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/external-links-ios.swift' language='swift' label=\"Swift\"}} {{demo.snippet name='support/integration/external-links-ios.m' language='obj-c' label=\"Objective-C\"}} {{/docs-demo}} Authenticating a user In cases where you have an authenticated user and want to pass its identity to our system, you can do that by configuring the token query parameter. Simply append the parameter to your existing WebView url and load the chat. The livechat will use that token to create request against our api. If the provided token expires, the chat emits a RequestToken event which allows you to refresh the token. To do that, post a web message, using the RequestTokenResponse event data: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/token-response.kt' language='kotlin' label=\"Kotlin\"}} {{demo.snippet name='support/integration/token-response.java' language='java' label=\"Java\"}} {{demo.snippet name='support/integration/RequestTokenResponseData.ts' language='ts' label=\"RequestTokenResponse type\"}} {{/docs-demo}} Posting a message from iOS Because iOS exposes no way to communicate from iOS context to the WKWebview context, you have to make additional adjustments. If the app is launched inside a WKWebview, we register a global wkSmoopePostMessage method. This allows you to use the evaluateJavaScript method, to emit data to the chat. The method accepts a JSON-Object which contains the message information. {{docs-snippet name='support/integration/token-response.swift' title='Responding to a token request with a new token' language='swift'}}","title":"Support livechat in a webview"},{"location":"Messaging/integration/support/webview/#support-livechat-in-a-webview","text":"The support integration in a webview happens by opening the WebView with a preconfigured url. This will automatically create a support conversation when loaded. {{docs-snippet name='support/integration/url.js' title='Livechat URL structure' language='js'}} To configure the instance, you can provide preconditions, language and other options as query parameters. The complex values have to be stringified and url encoded. For example to pass the preconditions {\"foo\": \"bar\"} , append a query parameter preconditions=%7B%22foo%22%3A%22bar%22%7D . The supported query parameters are preconditions , language and options {{docs-snippet name='support/integration/building-url.js' title='Example code to build a embeddable chat url in JavaScript' language='js'}} If the livechat is embedded via url, we emit the following events using the postMessage API. Messages are serialized as JSON objects. {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/message-event-data.ts' language='ts' label=\"Message\"}} {{demo.snippet name='support/integration/ReadyToSupportData.ts' language='ts' label=\"ReadyToSupport\"}} {{demo.snippet name='support/integration/CapturedLinkData.ts' language='ts' label=\"CapturedLink\"}} {{demo.snippet name='support/integration/RoomClosedData.ts' language='ts' label=\"RoomClosed\"}} {{demo.snippet name='support/integration/SupportRequestRejectedData.ts' language='ts' label=\"SupportRequestRejected\"}} {{demo.snippet name='support/integration/RequestTokenData.ts' language='ts' label=\"RequestToken\"}} {{/docs-demo}} We emit the following types via postMessage . ReadyToSupport , if the chat is initialized far enough to accept support input from the user CapturedLink , if the captureLinks option is enabled with {url: string} as event payload RoomClosed , if the current support room is closed SupportRequestRejected , if the current support request got rejected RequestTokenData , if the provided token became invalid Due to missing bridge between JavaScript and Android/iOS, we have to write some custom code to listen for emitted events. (See \"Android Setup\" and \"iOS Setup\")","title":"Support livechat in a webview"},{"location":"Messaging/integration/support/webview/#android-setup","text":"In Android, you have to define a JavaScript interface to inject into the WebView . {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/ipc-android.kt' language='kotlin' label=\"Kotlin\"}} {{demo.snippet name='support/integration/ipc-android.java' language='java' label=\"Java\"}} {{/docs-demo}} Using the addJavascriptInterface , register your Interface as SMOOPE_IPC . This allows us to call your Interface, if defined. {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/webview-setup-android.kt' language='kotlin' label=\"Kotlin\"}} {{demo.snippet name='support/integration/webview-setup-android.java' language='java' label=\"Java\"}} {{/docs-demo}} **File upload** If you want to allow the user to select a file, you have to make some adjustments. First [set](https://developer.android.com/reference/android/webkit/WebView.html#setWebChromeClient(android.webkit.WebChromeClient)) a [`WebChromeClient`](https://developer.android.com/reference/android/webkit/WebChromeClient) on the `WebView` instance. Next you can implement the [`onShowFileChooser`](https://developer.android.com/reference/android/webkit/WebChromeClient#onShowFileChooser(android.webkit.WebView,%2520android.webkit.ValueCallback%3Candroid.net.Uri%5B%5D%3E,%2520android.webkit.WebChromeClient.FileChooserParams)) to fit your use-case.","title":"Android Setup"},{"location":"Messaging/integration/support/webview/#ios-setup","text":"Similar to Android, in iOS, you have to register a listener for a custom messageHandler method on a WKWebView . Use the SMOOPE_IPC name to add to the WKUserContentController . Setup the WKWebView to receive livechat events: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/webview-setup-ios.swift' language='swift' label=\"Swift\"}} {{demo.snippet name='support/integration/webview-setup-ios.m' language='obj-c' label=\"Objective-C\"}} {{/docs-demo}} Listen for messages with the SMOOPE_IPC name: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/ipc-ios.swift' language='swift' label=\"Swift\"}} {{demo.snippet name='support/integration/ipc-ios.m' language='obj-c' label=\"Objective-C\"}} {{/docs-demo}}","title":"iOS Setup"},{"location":"Messaging/integration/support/webview/#opening-external-links","text":"If you want to allow the livechat to open external links, you have to make additional adjustments. The following snippets allows the webview to open external links by intercepting navigation actions. {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/external-links-ios.swift' language='swift' label=\"Swift\"}} {{demo.snippet name='support/integration/external-links-ios.m' language='obj-c' label=\"Objective-C\"}} {{/docs-demo}}","title":"Opening external links"},{"location":"Messaging/integration/support/webview/#authenticating-a-user","text":"In cases where you have an authenticated user and want to pass its identity to our system, you can do that by configuring the token query parameter. Simply append the parameter to your existing WebView url and load the chat. The livechat will use that token to create request against our api. If the provided token expires, the chat emits a RequestToken event which allows you to refresh the token. To do that, post a web message, using the RequestTokenResponse event data: {{#docs-demo as |demo|}} {{demo.snippet name='support/integration/token-response.kt' language='kotlin' label=\"Kotlin\"}} {{demo.snippet name='support/integration/token-response.java' language='java' label=\"Java\"}} {{demo.snippet name='support/integration/RequestTokenResponseData.ts' language='ts' label=\"RequestTokenResponse type\"}} {{/docs-demo}}","title":"Authenticating a user"},{"location":"Messaging/integration/support/webview/#posting-a-message-from-ios","text":"Because iOS exposes no way to communicate from iOS context to the WKWebview context, you have to make additional adjustments. If the app is launched inside a WKWebview, we register a global wkSmoopePostMessage method. This allows you to use the evaluateJavaScript method, to emit data to the chat. The method accepts a JSON-Object which contains the message information. {{docs-snippet name='support/integration/token-response.swift' title='Responding to a token request with a new token' language='swift'}}","title":"Posting a message from iOS"},{"location":"Processes/Processes_Installation/","text":"Notification Module Vision \ud83d\ude80 \u201cProvide our users with reliable and unified notifications about relevant events within the enterprise service platform\u201d\u200b Demo \u2728 You can find a demo page here . Credentials: Username: Patrick Password: password You can also quickly setup your own quick demo for any version of the Notification Module in Maestro here . Getting Started \ud83d\udc31\u200d\ud83c\udfcd Client \ud83d\udcd6 1. Access the artifacts feed \ud83c\udf81 @notificationmodule/client is a private library. To download it you need to add a .nprmc file with the NPM credentials. You can generate the credentials on the TFS feed . your-project/.npmrc @notificationmodule:registry=https://tfs.pmcs-helpline.com/tfs/Helpline/_packaging/sw/npm/registry/ always-auth=true HERE THE NPM CREDENTIALS 2. Include the package \ud83d\udce6 To include the Notification Module execute the following command in your project directory: yarn add @sw/notificationmodule@^1 Make sure to load the mandatory file e.g. for angular in the angular.json: \"scripts\": [ \"node_modules/@sw/notificationmodule/dist/elements/notification-module.js\" ], \"styles\": [ \"node_modules/@sw/notificationmodule/dist/elements/notification-module.css\" ] If your application is not using the SW control library you also must include the mandatory style file e.g. for angular in the angular.json: \"styles\": [ \"node_modules/@sw/notificationmodule/dist/elements/sw-angular-controls.css\" ] Add this polyfill to your polyfill.ts // Used for browsers with partially native support of Custom Elements import '@webcomponents/custom-elements/src/native-shim'; 3. Use it \ud83c\udf89 When using it inside an Angular application you can use it in HTML file like this: <sw-notification-module [attr.service-url]=\"'THE_URL_TO_THE_NOTIFICATION_MODULE_SERVER'\" [attr.lang]=\"'THE_LANGUAGE_OF_THE_USER'\" [attr.id-token]=\"'THE_OPENIDCONNECT_ID_TOKEN'\" [attr.user-id]=\"'THE_USER_IDENTIFIER'\"></sw-notification-module> When using it in e.g. a plain web application you can also use it like this: <sw-notification-module></sw-notification-module> const element = document.querySelector('sw-notification-module'); element.setAttribute('service-url', 'THE_URL_TO_THE_NOTIFICATION_MODULE_SERVER'); element.setAttribute('lang', 'THE_LANGUAGE_OF_THE_USER'); element.setAttribute('id-token', 'THE_OPENIDCONNECT_ID_TOKEN'); element.setAttribute('user-id', 'THE_USER_IDENTIFIER'); Microsoft Internet Explorer Support If you need to support Microsoft Internet Explorer, make sure to install these dependencies: \"dependencies\": { ... \"core-js\": \"3.3.3\", \"custom-event-polyfill\": \"1.0.7\", \"ie11-custom-properties\": \"3.0.6\", ... } and import them in your polyfill.ts // Used for browsers without a native support of Custom Elements import '@webcomponents/custom-elements/custom-elements.min'; // IE 11 Support import 'core-js'; import 'custom-event-polyfill'; import 'ie11-custom-properties'; In case you encounter a zone.js SecurityError in the console of Microsoft Internet Explorer, follow these steps to solve it: https://github.com/angular/zone.js/issues/1001 Features for the Notification Module that are not supported in Microsoft Internet Explorer: - Desktop Notifications Server \ud83d\udce1 1. Get the binaries \ud83e\uddfe You can get the latest binaries by executing the following command in the directory you want to copy them: \\\\lab-build01\\ArtifactRepository\\.cli\\buildcli.cmd get -p NotificationModule.Deployment -n -s \"https://tfs.pmcs-helpline.com/tfs/Helpline/Common/_git/NotificationModule\" Optionally you can also specify to just get the binaries for a specific runtime by appending -f Deployment/<RuntimeIdentifier> to the command. Available runtimes are: | Identifier | Description | | ---------- | ------------------ | | win-arm | Windows on ARM | | win-x64 | Windows x86 64-Bit | | linux-arm | Linux ARM | | linux-x64 | Linux x64 64-Bit | 2. Setup the server \ud83d\udcbb After getting the binaries you can find the setup script to install the Notification Module in the folder Deployment/<RuntimeIdentifier>. For Windows Deployments you can find a \"setup.cmd\" and for Linux a \"setup .sh\" script. You can pass in the following arguments for both install and uninstall commands: | Argument | Description | | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | | -s | --silent | Runs the setup without any user interaction. | | -f | --force | Ignores checks for the Installation location. WARNING: On uninstall this will remove all files in the installation path without asking! | | --verbose | Enables verbose logging to the console/terminal. | | --log false | Disable logging to a file. | | --log-path <path> | The path to the log file that is created by the setup. | | --help | Display information about a specific Verb. | | --version | Display version information. | Install If you want to install the Notification Module by using a Wizard-like experience, just execute the script with the argument install and the setup will ask you all information it needs. You can also specify all the information, if you want to run the setup automatically using the --silent switch, with the following arguments: | Argument | Description | | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | | -p | --path | The path to which the Notification Module should be installed to. This path should be a non-existant or empty directory. | | -T | --db-type | The database engine to use. Can be one of the following values: MSSql, Postgresql. | | -d | --db-connection-string | The connection string to the Notification Module database. | | --db-server | The database server of the Notification Module database. | | --db-name | The database name of the Notification Module database. | | --db-user | The user id that should be used to connect to the Notification Module database. | | --db-password | The password that should be used to connect to the Notification Module database. | | --db-port | The port of the database server of the Notification Module database. | | --db-schema | The database schema to use for the Notification Module database. | | --skip-db-migration | Skips the database creation/migration. | | --https-port | The port for https protocol. | | --certificate-pfx-path | The pfx file path of the certificate for the https port. | | --certificate-pfx-password | The pfx file password of the certificate for the https port. | | -u | --service-user | The user under which the service should run. | | --oidc-authority | The url for the authority of the OpenIDConnect server instance instance. | | --oidc-audience | The client audience to use. | | --oidc-claim-type | The claim that should be used to retrieve a unique user identifier from the OpenIDConnect token | | --authorized-systems | The names and secrets of system that are authrized to use notification module.Multiple values can be provided (e.g. --authorized-systems sys1:secret1 sys2:secret2) | | --allowed-origins | The url addresses of sites that can access notification module API.Multiple values can be provided(e.g. --allowed-origins http://site1.com https://site2.com) | The following options are only available for Windows Builds: | Argument | Description | | ---------------------------------- | -------------------------------------------------------------------------------------------------- | | --service-user-password | The password for the provided service user. | | --integrated-security | Use integrated security. Only valid for MSSql and provided service user. | | -t | --install-type | The type of installation. Can be one of the following values: Service, IISApplication, IISWebSite. | | -S | --certificate-store | The store of the certificate to use for the IIS Website or Windows Service. | | --cert-allow-invalid | Allow invalid certificates. | | -c | --certificate-thumbprint | The thumbprint of the certificate to use for the IIS Website or Windows Service. | | --set-cert-permission | Set read permissions for the specified certificate from the store for service-user. | There is also a \"setup-silent\" script in which you can type in all the information for faster reinstallation at a later point. Important: Adjust the appsettings.json file in the chosen installation path after installation finished so it fits your requirements. Uninstall If you want to uninstall a Notification Module Installation, just call the setup script with the \"uninstall\" parameter. Exit Codes All exit codes are grouped into the following binary masks: Mask Description 0x----01-- General error 0x----02-- Windows service error 0x----03-- IIS App Pool error 0x----04-- IIS Web Site error 0x----05-- IIS Application error 0x----06-- Systemd service error 0x--01---- Invalid prerequisite 0x--02---- Preparation failed 0x--03---- Installation failed 0x--04---- Uninstallation failed All possible exit codes that the setup can return: | Code (DEC) | Code (HEX) | Description | | ---------- | ------------ | -------------------------------------------------------------------------- | | -1 | 0xFFFFFFFF | An unknown error occurred | | 0 | 0x00000000 | The setup finished without errors | | 65792 | 0x00010100 | A required parameter is missing | | 65793 | 0x00010101 | A parameter value is invalid | | 65794 | 0x00010102 | Retrieving the certificates from the given certificate store failed | | 65795 | 0x00010103 | A certificate with the given thumbprint was not found in the store | | 65796 | 0x00010104 | The notification was not found | | 65797 | 0x00010105 | The setup was not executed as Administrator/root | | 67072 | 0x00010600 | The installation directory could not be retrieved from the systemd service | | 131584 | 0x00020200 | Starting the Windows service failed | | 131585 | 0x00020201 | Stopping the Windows service failed | | 131840 | 0x00020300 | Starting the IIS App Pool failed | | 131841 | 0x00020301 | Stopping the IIS App Pool failed | | 132608 | 0x00020600 | Starting the systemd service failed | | 132609 | 0x00020601 | Stopping the systemd service failed | | 196864 | 0x00030100 | Copying the Notification Module Binaries failed | | 196865 | 0x00030101 | Migrating/Creating the database failed | | 196866 | 0x00030102 | Updating the application settings failed | | 197120 | 0x00030200 | Creating the Windows service failed | | 197376 | 0x00030300 | Creating the IIS App Pool failed | | 197632 | 0x00030400 | Creating the IIS Web Site failed | | 197633 | 0x00030401 | Updating the IIS Web Site failed | | 197888 | 0x00030500 | Creating the IIS Application failed | | 197889 | 0x00030501 | Updating the IIS Application failed | | 198144 | 0x00030600 | Creating the systemd service failed | | 198145 | 0x00030601 | Updating the systemd service failed | | 262400 | 0x00040100 | Removing the Notification Module Binaries failed | | 262656 | 0x00040200 | Removing the Windows service failed | | 262657 | 0x00040201 | The Notification Module Windows service was not found | | 262912 | 0x00040300 | Removing the IIS App Pool failed | | 263168 | 0x00040400 | Removing the IIS Web Site failed | | 263424 | 0x00040500 | Removing the IIS Application failed | | 263680 | 0x00040600 | Removing the systemd service failed | 3. Access the Swagger UI \ud83d\udcca You can find the Swagger UI of the Notification Module under: https://{YOUR_CONFIGURED_NOTIFICATION_MODULE_URL}:{PORT}/api/notification/index.html 4. Send events \ud83e\ude81 To be able to send a new event to the Notification Module you must first request a token (JWT). All further requests must include the token. Architecture Documentation \ud83d\udcda See our architecture documenation based on the arc42 template. Responsible Team \ud83d\udc69\ud83c\udffc\u200d\ud83d\ude80 Name Role Nico Graichen Product Owner Marius Schulze Architect / Developer Marc Schmidt Developer Nima Hamidian Developer Philip Koep Developer Jens Schmitz Developer Patrick Pf\u00fcller Developer","title":"Installation"},{"location":"Processes/Processes_Installation/#notification-module","text":"","title":"Notification Module"},{"location":"Processes/Processes_Installation/#vision","text":"\u201cProvide our users with reliable and unified notifications about relevant events within the enterprise service platform\u201d\u200b","title":"Vision \ud83d\ude80"},{"location":"Processes/Processes_Installation/#demo","text":"You can find a demo page here . Credentials: Username: Patrick Password: password You can also quickly setup your own quick demo for any version of the Notification Module in Maestro here .","title":"Demo \u2728"},{"location":"Processes/Processes_Installation/#getting-started","text":"","title":"Getting Started \ud83d\udc31\u200d\ud83c\udfcd"},{"location":"Processes/Processes_Installation/#client","text":"","title":"Client \ud83d\udcd6"},{"location":"Processes/Processes_Installation/#1-access-the-artifacts-feed","text":"@notificationmodule/client is a private library. To download it you need to add a .nprmc file with the NPM credentials. You can generate the credentials on the TFS feed . your-project/.npmrc @notificationmodule:registry=https://tfs.pmcs-helpline.com/tfs/Helpline/_packaging/sw/npm/registry/ always-auth=true HERE THE NPM CREDENTIALS","title":"1. Access the artifacts feed \ud83c\udf81"},{"location":"Processes/Processes_Installation/#2-include-the-package","text":"To include the Notification Module execute the following command in your project directory: yarn add @sw/notificationmodule@^1 Make sure to load the mandatory file e.g. for angular in the angular.json: \"scripts\": [ \"node_modules/@sw/notificationmodule/dist/elements/notification-module.js\" ], \"styles\": [ \"node_modules/@sw/notificationmodule/dist/elements/notification-module.css\" ] If your application is not using the SW control library you also must include the mandatory style file e.g. for angular in the angular.json: \"styles\": [ \"node_modules/@sw/notificationmodule/dist/elements/sw-angular-controls.css\" ] Add this polyfill to your polyfill.ts // Used for browsers with partially native support of Custom Elements import '@webcomponents/custom-elements/src/native-shim';","title":"2. Include the package \ud83d\udce6"},{"location":"Processes/Processes_Installation/#3-use-it","text":"When using it inside an Angular application you can use it in HTML file like this: <sw-notification-module [attr.service-url]=\"'THE_URL_TO_THE_NOTIFICATION_MODULE_SERVER'\" [attr.lang]=\"'THE_LANGUAGE_OF_THE_USER'\" [attr.id-token]=\"'THE_OPENIDCONNECT_ID_TOKEN'\" [attr.user-id]=\"'THE_USER_IDENTIFIER'\"></sw-notification-module> When using it in e.g. a plain web application you can also use it like this: <sw-notification-module></sw-notification-module> const element = document.querySelector('sw-notification-module'); element.setAttribute('service-url', 'THE_URL_TO_THE_NOTIFICATION_MODULE_SERVER'); element.setAttribute('lang', 'THE_LANGUAGE_OF_THE_USER'); element.setAttribute('id-token', 'THE_OPENIDCONNECT_ID_TOKEN'); element.setAttribute('user-id', 'THE_USER_IDENTIFIER');","title":"3. Use it \ud83c\udf89"},{"location":"Processes/Processes_Installation/#microsoft-internet-explorer-support","text":"If you need to support Microsoft Internet Explorer, make sure to install these dependencies: \"dependencies\": { ... \"core-js\": \"3.3.3\", \"custom-event-polyfill\": \"1.0.7\", \"ie11-custom-properties\": \"3.0.6\", ... } and import them in your polyfill.ts // Used for browsers without a native support of Custom Elements import '@webcomponents/custom-elements/custom-elements.min'; // IE 11 Support import 'core-js'; import 'custom-event-polyfill'; import 'ie11-custom-properties'; In case you encounter a zone.js SecurityError in the console of Microsoft Internet Explorer, follow these steps to solve it: https://github.com/angular/zone.js/issues/1001 Features for the Notification Module that are not supported in Microsoft Internet Explorer: - Desktop Notifications","title":"Microsoft Internet Explorer Support"},{"location":"Processes/Processes_Installation/#server","text":"","title":"Server \ud83d\udce1"},{"location":"Processes/Processes_Installation/#1-get-the-binaries","text":"You can get the latest binaries by executing the following command in the directory you want to copy them: \\\\lab-build01\\ArtifactRepository\\.cli\\buildcli.cmd get -p NotificationModule.Deployment -n -s \"https://tfs.pmcs-helpline.com/tfs/Helpline/Common/_git/NotificationModule\" Optionally you can also specify to just get the binaries for a specific runtime by appending -f Deployment/<RuntimeIdentifier> to the command. Available runtimes are: | Identifier | Description | | ---------- | ------------------ | | win-arm | Windows on ARM | | win-x64 | Windows x86 64-Bit | | linux-arm | Linux ARM | | linux-x64 | Linux x64 64-Bit |","title":"1. Get the binaries \ud83e\uddfe"},{"location":"Processes/Processes_Installation/#2-setup-the-server","text":"After getting the binaries you can find the setup script to install the Notification Module in the folder Deployment/<RuntimeIdentifier>. For Windows Deployments you can find a \"setup.cmd\" and for Linux a \"setup .sh\" script. You can pass in the following arguments for both install and uninstall commands: | Argument | Description | | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | | -s | --silent | Runs the setup without any user interaction. | | -f | --force | Ignores checks for the Installation location. WARNING: On uninstall this will remove all files in the installation path without asking! | | --verbose | Enables verbose logging to the console/terminal. | | --log false | Disable logging to a file. | | --log-path <path> | The path to the log file that is created by the setup. | | --help | Display information about a specific Verb. | | --version | Display version information. |","title":"2. Setup the server \ud83d\udcbb"},{"location":"Processes/Processes_Installation/#install","text":"If you want to install the Notification Module by using a Wizard-like experience, just execute the script with the argument install and the setup will ask you all information it needs. You can also specify all the information, if you want to run the setup automatically using the --silent switch, with the following arguments: | Argument | Description | | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | | -p | --path | The path to which the Notification Module should be installed to. This path should be a non-existant or empty directory. | | -T | --db-type | The database engine to use. Can be one of the following values: MSSql, Postgresql. | | -d | --db-connection-string | The connection string to the Notification Module database. | | --db-server | The database server of the Notification Module database. | | --db-name | The database name of the Notification Module database. | | --db-user | The user id that should be used to connect to the Notification Module database. | | --db-password | The password that should be used to connect to the Notification Module database. | | --db-port | The port of the database server of the Notification Module database. | | --db-schema | The database schema to use for the Notification Module database. | | --skip-db-migration | Skips the database creation/migration. | | --https-port | The port for https protocol. | | --certificate-pfx-path | The pfx file path of the certificate for the https port. | | --certificate-pfx-password | The pfx file password of the certificate for the https port. | | -u | --service-user | The user under which the service should run. | | --oidc-authority | The url for the authority of the OpenIDConnect server instance instance. | | --oidc-audience | The client audience to use. | | --oidc-claim-type | The claim that should be used to retrieve a unique user identifier from the OpenIDConnect token | | --authorized-systems | The names and secrets of system that are authrized to use notification module.Multiple values can be provided (e.g. --authorized-systems sys1:secret1 sys2:secret2) | | --allowed-origins | The url addresses of sites that can access notification module API.Multiple values can be provided(e.g. --allowed-origins http://site1.com https://site2.com) | The following options are only available for Windows Builds: | Argument | Description | | ---------------------------------- | -------------------------------------------------------------------------------------------------- | | --service-user-password | The password for the provided service user. | | --integrated-security | Use integrated security. Only valid for MSSql and provided service user. | | -t | --install-type | The type of installation. Can be one of the following values: Service, IISApplication, IISWebSite. | | -S | --certificate-store | The store of the certificate to use for the IIS Website or Windows Service. | | --cert-allow-invalid | Allow invalid certificates. | | -c | --certificate-thumbprint | The thumbprint of the certificate to use for the IIS Website or Windows Service. | | --set-cert-permission | Set read permissions for the specified certificate from the store for service-user. | There is also a \"setup-silent\" script in which you can type in all the information for faster reinstallation at a later point. Important: Adjust the appsettings.json file in the chosen installation path after installation finished so it fits your requirements.","title":"Install"},{"location":"Processes/Processes_Installation/#uninstall","text":"If you want to uninstall a Notification Module Installation, just call the setup script with the \"uninstall\" parameter.","title":"Uninstall"},{"location":"Processes/Processes_Installation/#exit-codes","text":"All exit codes are grouped into the following binary masks: Mask Description 0x----01-- General error 0x----02-- Windows service error 0x----03-- IIS App Pool error 0x----04-- IIS Web Site error 0x----05-- IIS Application error 0x----06-- Systemd service error 0x--01---- Invalid prerequisite 0x--02---- Preparation failed 0x--03---- Installation failed 0x--04---- Uninstallation failed All possible exit codes that the setup can return: | Code (DEC) | Code (HEX) | Description | | ---------- | ------------ | -------------------------------------------------------------------------- | | -1 | 0xFFFFFFFF | An unknown error occurred | | 0 | 0x00000000 | The setup finished without errors | | 65792 | 0x00010100 | A required parameter is missing | | 65793 | 0x00010101 | A parameter value is invalid | | 65794 | 0x00010102 | Retrieving the certificates from the given certificate store failed | | 65795 | 0x00010103 | A certificate with the given thumbprint was not found in the store | | 65796 | 0x00010104 | The notification was not found | | 65797 | 0x00010105 | The setup was not executed as Administrator/root | | 67072 | 0x00010600 | The installation directory could not be retrieved from the systemd service | | 131584 | 0x00020200 | Starting the Windows service failed | | 131585 | 0x00020201 | Stopping the Windows service failed | | 131840 | 0x00020300 | Starting the IIS App Pool failed | | 131841 | 0x00020301 | Stopping the IIS App Pool failed | | 132608 | 0x00020600 | Starting the systemd service failed | | 132609 | 0x00020601 | Stopping the systemd service failed | | 196864 | 0x00030100 | Copying the Notification Module Binaries failed | | 196865 | 0x00030101 | Migrating/Creating the database failed | | 196866 | 0x00030102 | Updating the application settings failed | | 197120 | 0x00030200 | Creating the Windows service failed | | 197376 | 0x00030300 | Creating the IIS App Pool failed | | 197632 | 0x00030400 | Creating the IIS Web Site failed | | 197633 | 0x00030401 | Updating the IIS Web Site failed | | 197888 | 0x00030500 | Creating the IIS Application failed | | 197889 | 0x00030501 | Updating the IIS Application failed | | 198144 | 0x00030600 | Creating the systemd service failed | | 198145 | 0x00030601 | Updating the systemd service failed | | 262400 | 0x00040100 | Removing the Notification Module Binaries failed | | 262656 | 0x00040200 | Removing the Windows service failed | | 262657 | 0x00040201 | The Notification Module Windows service was not found | | 262912 | 0x00040300 | Removing the IIS App Pool failed | | 263168 | 0x00040400 | Removing the IIS Web Site failed | | 263424 | 0x00040500 | Removing the IIS Application failed | | 263680 | 0x00040600 | Removing the systemd service failed |","title":"Exit Codes"},{"location":"Processes/Processes_Installation/#3-access-the-swagger-ui","text":"You can find the Swagger UI of the Notification Module under: https://{YOUR_CONFIGURED_NOTIFICATION_MODULE_URL}:{PORT}/api/notification/index.html","title":"3. Access the Swagger UI \ud83d\udcca"},{"location":"Processes/Processes_Installation/#4-send-events","text":"To be able to send a new event to the Notification Module you must first request a token (JWT). All further requests must include the token.","title":"4. Send events \ud83e\ude81"},{"location":"Processes/Processes_Installation/#architecture-documentation","text":"See our architecture documenation based on the arc42 template.","title":"Architecture Documentation \ud83d\udcda"},{"location":"Processes/Processes_Installation/#responsible-team","text":"Name Role Nico Graichen Product Owner Marius Schulze Architect / Developer Marc Schmidt Developer Nima Hamidian Developer Philip Koep Developer Jens Schmitz Developer Patrick Pf\u00fcller Developer","title":"Responsible Team \ud83d\udc69\ud83c\udffc\u200d\ud83d\ude80"},{"location":"Processes/Processes_WFDesign/","text":"Introduction and Goals Vision \"Enable direct communication between users and agents for an improved service satisfaction\" Requirements Overview Why Improve user satisfaction by enabling them to receive quick solutions for their problems Reduce the effort to create a new ticket for a customer / gather all required information to solve a ticket How Reusing existing functionality to quickly create new processes Including in new POWA client What Integrate Messaging (former Smoope) into Processes Quality Goals Priority Quality Goal Scenario 1 Configurability It should be easy to install and configure Messaging for/on customer environments 2 Monitoring The integration should provide logging and monitoring mechanism based on the \"Book of play\" Stakeholders Role/Name Contact Expectations Product Owner Halil Mandal Messaging is completely integrated in Processes and provides added value Platform Integration Manager Christian Pesch The integration should be aligned with the platform aspirations and the Book of Play","title":"Workflow design"},{"location":"Processes/Processes_WFDesign/#introduction-and-goals","text":"","title":"Introduction and Goals"},{"location":"Processes/Processes_WFDesign/#vision","text":"\"Enable direct communication between users and agents for an improved service satisfaction\"","title":"Vision"},{"location":"Processes/Processes_WFDesign/#requirements-overview","text":"","title":"Requirements Overview"},{"location":"Processes/Processes_WFDesign/#why","text":"Improve user satisfaction by enabling them to receive quick solutions for their problems Reduce the effort to create a new ticket for a customer / gather all required information to solve a ticket","title":"Why"},{"location":"Processes/Processes_WFDesign/#how","text":"Reusing existing functionality to quickly create new processes Including in new POWA client","title":"How"},{"location":"Processes/Processes_WFDesign/#what","text":"Integrate Messaging (former Smoope) into Processes","title":"What"},{"location":"Processes/Processes_WFDesign/#quality-goals","text":"Priority Quality Goal Scenario 1 Configurability It should be easy to install and configure Messaging for/on customer environments 2 Monitoring The integration should provide logging and monitoring mechanism based on the \"Book of play\"","title":"Quality Goals"},{"location":"Processes/Processes_WFDesign/#stakeholders","text":"Role/Name Contact Expectations Product Owner Halil Mandal Messaging is completely integrated in Processes and provides added value Platform Integration Manager Christian Pesch The integration should be aligned with the platform aspirations and the Book of Play","title":"Stakeholders"}]}